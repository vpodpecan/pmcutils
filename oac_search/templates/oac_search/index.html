{% load static %}
{% load bootstrap3 %}
{% load humanize %}

<!doctype html>
<html lang="en">
  <head>
    <title>PMC search and export</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    {% bootstrap_css %}

    <script src="{% static 'oac_search/js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'oac_search/js/js.cookie.js' %}"></script>
    <script src="{% static 'oac_search/js/loadingOverlay.js' %}"></script>
    {% bootstrap_javascript %}
    <script src="{% static 'oac_search/js/bootbox.min.js' %}"></script>
    <script src="{% static 'oac_search/js/main.js' %}"></script>

    <style>
        .infotext {
            color: gray;
        }

        .btm-buffer {
            margin-bottom: 30px;
        }

        th, tr {
            text-align: center;
        }
        textarea {
            min-height: 50px;
            max-height: 300px;
            overflow-y: scroll;
            resize: vertical;
        }
    </style>

    <script>
    </script>

  </head>
  <body>


    <div class="container">

        <div class="row btm-buffer">
            <div class="col-md-6 col-md-offset-3">
                <h1>Search & export PMC articles</h1>
            </div>
        </div>

        <div class="row btm-buffer">
            <div class="col-md-3 infotext">
                <h3>Database info</h3>
                <dl>
                    <dt>Archives</dt>
                    <dd>{{ archives.count|intcomma }}</dd>

                    <dt>Articles</dt>
                    <dd>{{ narticles|intcomma }}</dd>

                </dl>

                <h3>Archive versions</h3>
                <dl class="dl">
                    {% for a in archives %}
                        <dt>{{ a.name }}</dt>
                        <dd>{{ a.date }}</dd>
                    {% endfor %}
                </dl>
            </div>


          <div class="col-md-6">

              {# Display django.contrib.messages as Bootstrap alerts #}
              {% bootstrap_messages %}

              <form method="post" role="form" id="searchform">
                {% csrf_token %}
                {% bootstrap_form form %}
                {% buttons %}
                {# <button type="submit" class="btn btn-primary">#}
                <button id="searchbutton" type="submit" class="btn btn-primary">
                    {% bootstrap_icon "search" %} search
                </button>
                {% endbuttons %}
              </form>
          </div>

            <div class="col-md-3 infotext">
                <h3>Guidelines</h3>
                <ol>
                    <li>
                        Do not specify nested XML tags to take text from or duplicates will occur!
                    </li>
                    <li>
                        Order of XML tags to take text from will determine the order of output text blocks.
                    </li>
                    <li>
                        Ignored XML blocks are deleted prior to the extraction of wanted blocks.
                    </li>
                    <li>
                        Attribute-value tag search is possible and has the following syntax, e.g.: </br>
                        {# <code>sec sec-type="results"</code>#}
                        <samp>sec sec-type="results"</samp>
                    </li>
                </ol>
            </div>
        </div>

        <div class="row" id="results">
            <div class="col-md-6 col-md-offset-3">
                <h3>Results</h3>

                <table class="table table-condensed table-bordered">
                    <tr class="text-center">
                      <th>PMC hits</th>
                      <th>found in database</th>
                      <th>empty after XML extraction</th>
                    </tr>
                    <tr>
                      <td id="pmchits"></td>
                      <td id="indb"></td>
                      <td id="empty"></td>
                    </tr>
                </table>

                <h4>Download corpus</h4>
                <a id="corpuslink" href=""></a>

            </div>
        </div>

    </div>
  </body>
</html>
